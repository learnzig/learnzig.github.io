import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.gI2xCOxE.js";const A=JSON.parse('{"title":"é”™è¯¯å¤„ç†","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"basic/error_handle.md","filePath":"basic/error_handle.md","lastUpdated":1700370012000}'),p={name:"basic/error_handle.md"},o=l(`<h1 id="é”™è¯¯å¤„ç†" tabindex="-1">é”™è¯¯å¤„ç† <a class="header-anchor" href="#é”™è¯¯å¤„ç†" aria-label="Permalink to &quot;é”™è¯¯å¤„ç†&quot;">â€‹</a></h1><p>ç¨‹åºä¼šåœ¨æŸäº›æ—¶å€™å› ä¸ºæŸäº›æˆ‘ä»¬çŸ¥é“æˆ–è€…ä¸çŸ¥é“çš„åŸå› å‡ºé”™ï¼Œæœ‰çš„é”™è¯¯æˆ‘ä»¬å¯ä»¥é¢„çŸ¥å¹¶å¤„ç†ï¼Œæœ‰äº›é”™è¯¯æˆ‘ä»¬æ— æ³•é¢„çŸ¥ï¼Œä½†æˆ‘ä»¬å¯ä»¥æ•è·å®ƒä»¬å¹¶æœ‰æ•ˆåœ°æŠ¥å‘Šç»™ç”¨æˆ·ã€‚</p><div class="info custom-block"><p class="custom-block-title">ğŸ…¿ï¸ æç¤º</p><p>äº‹å®ä¸Šï¼Œç›®å‰ zig çš„é”™è¯¯å¤„ç†æ–¹æ¡ˆç¬”è€…è®¤ä¸ºæ˜¯æ¯”è¾ƒç®€é™‹çš„ï¼Œå› ä¸ºé”™è¯¯ç±»å‹åœ¨ zig ä¸­åªæ˜¯ç•¥å¾®åŠ å·¥åçš„ <code>enum</code>ï¼Œè¿™å¯¼è‡´é”™è¯¯ç±»å‹æ— æ³•æºå¸¦æœ‰æ•ˆçš„ <code>payload</code>ï¼Œä½ åªèƒ½é€šè¿‡ error çš„ tagName æ¥è·å–æœ‰æ•ˆçš„ä¿¡æ¯ã€‚</p></div><p>ä»¥ä¸‹å±•ç¤ºäº† error çš„åŸºæœ¬å®šä¹‰å’Œä½¿ç”¨ï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">std</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">@import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;std&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">FileOpenError</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">AccessDenied</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">OutOfMemory</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">FileNotFound</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">AllocationError</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">OutOfMemory</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">pub</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;"> = </span><span style="color:#B392F0;">foo</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">AllocationError</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">OutOfMemory</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">FileOpenError</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">OutOfMemory</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">std</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">debug</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;error is OutOfMemory</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, .{});</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">foo</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;">: </span><span style="color:#FFAB70;">AllocationError</span><span style="color:#E1E4E8;">) </span><span style="color:#FFAB70;">FileOpenError</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">std</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">@import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;std&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">FileOpenError</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">AccessDenied</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">OutOfMemory</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">FileNotFound</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">AllocationError</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">OutOfMemory</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">pub</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!void</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">err</span><span style="color:#24292E;"> = </span><span style="color:#6F42C1;">foo</span><span style="color:#24292E;">(</span><span style="color:#E36209;">AllocationError</span><span style="color:#24292E;">.</span><span style="color:#E36209;">OutOfMemory</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">err</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#E36209;">FileOpenError</span><span style="color:#24292E;">.</span><span style="color:#E36209;">OutOfMemory</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">std</span><span style="color:#24292E;">.</span><span style="color:#E36209;">debug</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;error is OutOfMemory</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">, .{});</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">foo</span><span style="color:#24292E;">(</span><span style="color:#E36209;">err</span><span style="color:#24292E;">: </span><span style="color:#E36209;">AllocationError</span><span style="color:#24292E;">) </span><span style="color:#E36209;">FileOpenError</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#E36209;">err</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>ä»¥ä¸Šä»£ç ä½¿ç”¨ <code>error</code> å…³é”®å­—å®šä¹‰äº†ä¸¤ä¸ªé”™è¯¯ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼š<code>FileOpenError</code> å’Œ <code>AllocationError</code>ï¼Œè¿™ä¸¤ä¸ªç±»å‹å®ç°äº†å‡ ç§é”™è¯¯çš„å®šä¹‰ã€‚</p><p>æ³¨æ„ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å¤šä¸ªé‡å¤çš„é”™è¯¯ tagNameï¼Œå®ƒä»¬å‡ä¼šåˆ†é…ä¸€ä¸ªå¤§äº 0 çš„å€¼ï¼Œå¤šä¸ªé‡å¤çš„é”™è¯¯ tagName çš„å€¼æ˜¯ç›¸åŒçš„ï¼ŒåŒæ—¶ error è¿˜æ”¯æŒå°†é”™è¯¯ä»å­é›†è½¬æ¢åˆ°è¶…é›†ï¼Œè¿™é‡Œæˆ‘ä»¬å°±æ˜¯å°†å­é›† <code>AllocationError</code> é€šè¿‡å‡½æ•° <code>foo</code> è½¬æ¢åˆ°è¶…é›† <code>FileOpenError</code>ã€‚</p><div class="info custom-block"><p class="custom-block-title">ğŸ…¿ï¸ æç¤º</p><p>åœ¨ç¼–è¯‘æ—¶ï¼Œzig ç¼–è¯‘å™¨ä¼šåšä¸€ä¸ªé¢å¤–çš„å·¥ä½œï¼Œé‚£å°±æ˜¯ç¡®å®šé”™è¯¯çš„æ•°é‡ï¼Œåœ¨æœ€æ–°çš„ç¨³å®šç‰ˆï¼ˆ0.11ï¼‰ä¸­ï¼Œè¿™ä¸ªå¤§å°å›ºå®šä½¿ç”¨ <code>u16</code>ï¼Œä½†æ˜¯åœ¨å¼€å‘ç‰ˆä¸­ï¼Œå·²ç»ä¿®æ”¹ä¸ºé»˜è®¤ä½¿ç”¨ <code>u16</code>ï¼Œä½†åœ¨ç¼–è¯‘æ—¶å¦‚æœä¼ å…¥å‚æ•° <code>--error-limit [num]</code>ï¼Œå®ƒä¼šä½¿ç”¨å…·æœ‰è¡¨ç¤ºæ‰€æœ‰é”™è¯¯å€¼æ‰€éœ€çš„æœ€å°‘ä½æ•°çš„æ•´æ•°ç±»å‹ã€‚</p></div><h2 id="åªæœ‰ä¸€ä¸ªå€¼çš„é”™è¯¯é›†" tabindex="-1">åªæœ‰ä¸€ä¸ªå€¼çš„é”™è¯¯é›† <a class="header-anchor" href="#åªæœ‰ä¸€ä¸ªå€¼çš„é”™è¯¯é›†" aria-label="Permalink to &quot;åªæœ‰ä¸€ä¸ªå€¼çš„é”™è¯¯é›†&quot;">â€‹</a></h2><p>å¦‚æœä½ æ‰“ç®—å®šä¹‰ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå€¼çš„é”™è¯¯é›†ï¼Œæˆ‘ä»¬è¿™æ—¶å†ä½¿ç”¨ä»¥ä¸Šçš„å®šä¹‰æ–¹æ³•æœªå…è¿‡äºå•°å—¦ï¼Œzig æä¾›äº†ä¸€ç§ç®€çŸ­æ–¹å¼æ¥å®šä¹‰ï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">FileNotFound</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">err</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">.</span><span style="color:#E36209;">FileNotFound</span><span style="color:#24292E;">;</span></span></code></pre></div><p>ä»¥ä¸Šè¿™è¡Œä»£ç ç›¸å½“äºï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;"> = (</span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;"> {</span><span style="color:#FFAB70;">FileNotFound</span><span style="color:#E1E4E8;">}).</span><span style="color:#FFAB70;">FileNotFound</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">err</span><span style="color:#24292E;"> = (</span><span style="color:#D73A49;">error</span><span style="color:#24292E;"> {</span><span style="color:#E36209;">FileNotFound</span><span style="color:#24292E;">}).</span><span style="color:#E36209;">FileNotFound</span><span style="color:#24292E;">;</span></span></code></pre></div><h2 id="å…¨å±€é”™è¯¯é›†" tabindex="-1">å…¨å±€é”™è¯¯é›† <a class="header-anchor" href="#å…¨å±€é”™è¯¯é›†" aria-label="Permalink to &quot;å…¨å±€é”™è¯¯é›†&quot;">â€‹</a></h2><p><code>anyerror</code> æŒ‡çš„æ˜¯å…¨å±€çš„é”™è¯¯é›†åˆï¼Œå®ƒåŒ…å«ç¼–è¯‘å•å…ƒä¸­çš„æ‰€æœ‰é”™è¯¯é›†ï¼Œå³è¶…é›†ä¸æ˜¯å­é›†ã€‚</p><p>ä½ å¯ä»¥å°†æ‰€æœ‰çš„é”™è¯¯å¼ºåˆ¶è½¬æ¢åˆ° <code>anyerror</code>ï¼Œä¹Ÿå¯ä»¥å°† <code>anyerror</code> è½¬æ¢åˆ°æ‰€æœ‰é”™è¯¯é›†ï¼Œå¹¶åœ¨è½¬æ¢æ—¶å¢åŠ ä¸€ä¸ªè¯­è¨€çº§æ–­è¨€ï¼ˆlanguage-level assertï¼‰ä¿è¯é”™è¯¯ä¸€å®šæ˜¯ç›®æ ‡é”™è¯¯é›†çš„å€¼ã€‚</p><div class="warning custom-block"><p class="custom-block-title">âš ï¸ è­¦å‘Š</p><p>åº”å°½é‡é¿å…ä½¿ç”¨ <code>anyerror</code>ï¼Œå› ä¸ºå®ƒä¼šé˜»æ­¢ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸå°±æ£€æµ‹å‡ºå¯èƒ½å­˜åœ¨çš„é”™è¯¯ï¼Œå¢åŠ ä»£ç å‡ºé”™ debug çš„è´Ÿæ‹…ã€‚</p></div><h2 id="é”™è¯¯è”åˆç±»å‹" tabindex="-1">é”™è¯¯è”åˆç±»å‹ <a class="header-anchor" href="#é”™è¯¯è”åˆç±»å‹" aria-label="Permalink to &quot;é”™è¯¯è”åˆç±»å‹&quot;">â€‹</a></h2><p>ï¼ï¼ï¼ä»¥ä¸Šæ‰€è¯´çš„é”™è¯¯ç±»å‹å®é™…ä¸Šç”¨çš„å¤§æ¦‚ä¸å¤šï¼Œä½†é”™è¯¯è”åˆç±»å‹å¤§æ¦‚æ˜¯ä½ ç»å¸¸ç”¨çš„ã€‚</p><p>åªéœ€è¦åœ¨æ™®é€šç±»å‹çš„å‰é¢å¢åŠ ä¸€ä¸ª <code>!</code> å°±æ˜¯ä»£è¡¨è¿™ä¸ªç±»å‹å˜æˆé”™è¯¯è”åˆç±»å‹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„å‡½æ•°ï¼š</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå°†è‹±æ–‡å­—ç¬¦ä¸²è§£æä¸ºæ•°å­—çš„ç¤ºä¾‹ï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">std</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">@import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;std&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">maxInt</span><span style="color:#E1E4E8;"> = </span><span style="color:#FFAB70;">std</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">math</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">maxInt</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">pub</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">parseU64</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">buf</span><span style="color:#E1E4E8;">: []</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">radix</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">!u64</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">x</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u64</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">buf</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">|</span><span style="color:#FFAB70;">c</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">digit</span><span style="color:#E1E4E8;"> = </span><span style="color:#B392F0;">charToDigit</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">digit</span><span style="color:#E1E4E8;"> &gt;= </span><span style="color:#FFAB70;">radix</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">InvalidChar</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// x *= radix</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">ov</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">@mulWithOverflow</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">x</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">radix</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">ov</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">OverFlow</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// x += digit</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">ov</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">@addWithOverflow</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">ov</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">], </span><span style="color:#FFAB70;">digit</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">ov</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">OverFlow</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">x</span><span style="color:#E1E4E8;"> = </span><span style="color:#FFAB70;">ov</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">x</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">charToDigit</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;0&#39;</span><span style="color:#E1E4E8;"> ... </span><span style="color:#9ECBFF;">&#39;9&#39;</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;0&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;A&#39;</span><span style="color:#E1E4E8;"> ... </span><span style="color:#9ECBFF;">&#39;Z&#39;</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;A&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;a&#39;</span><span style="color:#E1E4E8;"> ... </span><span style="color:#9ECBFF;">&#39;z&#39;</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;a&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#B392F0;">maxInt</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">std</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">@import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;std&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">maxInt</span><span style="color:#24292E;"> = </span><span style="color:#E36209;">std</span><span style="color:#24292E;">.</span><span style="color:#E36209;">math</span><span style="color:#24292E;">.</span><span style="color:#E36209;">maxInt</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">pub</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">parseU64</span><span style="color:#24292E;">(</span><span style="color:#E36209;">buf</span><span style="color:#24292E;">: []</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">u8</span><span style="color:#24292E;">, </span><span style="color:#E36209;">radix</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u8</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">!u64</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> </span><span style="color:#E36209;">x</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u64</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">buf</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">|</span><span style="color:#E36209;">c</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">digit</span><span style="color:#24292E;"> = </span><span style="color:#6F42C1;">charToDigit</span><span style="color:#24292E;">(</span><span style="color:#E36209;">c</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">digit</span><span style="color:#24292E;"> &gt;= </span><span style="color:#E36209;">radix</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">.</span><span style="color:#E36209;">InvalidChar</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// x *= radix</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> </span><span style="color:#E36209;">ov</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">@mulWithOverflow</span><span style="color:#24292E;">(</span><span style="color:#E36209;">x</span><span style="color:#24292E;">, </span><span style="color:#E36209;">radix</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">ov</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">.</span><span style="color:#E36209;">OverFlow</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// x += digit</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">ov</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">@addWithOverflow</span><span style="color:#24292E;">(</span><span style="color:#E36209;">ov</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">], </span><span style="color:#E36209;">digit</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">ov</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">.</span><span style="color:#E36209;">OverFlow</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">x</span><span style="color:#24292E;"> = </span><span style="color:#E36209;">ov</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">];</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#E36209;">x</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">charToDigit</span><span style="color:#24292E;">(</span><span style="color:#E36209;">c</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u8</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">u8</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">c</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;0&#39;</span><span style="color:#24292E;"> ... </span><span style="color:#032F62;">&#39;9&#39;</span><span style="color:#24292E;"> =&gt; </span><span style="color:#E36209;">c</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;0&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;A&#39;</span><span style="color:#24292E;"> ... </span><span style="color:#032F62;">&#39;Z&#39;</span><span style="color:#24292E;"> =&gt; </span><span style="color:#E36209;">c</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;A&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;a&#39;</span><span style="color:#24292E;"> ... </span><span style="color:#032F62;">&#39;z&#39;</span><span style="color:#24292E;"> =&gt; </span><span style="color:#E36209;">c</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;a&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> =&gt; </span><span style="color:#6F42C1;">maxInt</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">u8</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æ³¨æ„å‡½æ•°çš„è¿”å›å€¼ï¼š<code>!u64</code>ï¼Œè¿™æ„å‘³å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª <code>u64</code> æˆ–è€…æ˜¯ä¸€ä¸ª <code>error</code>ï¼Œé”™è¯¯é›†åœ¨è¿™é‡Œè¢«ä¿ç•™åœ¨ <code>!</code> å·¦ä¾§ï¼Œå› æ­¤è¯¥é”™è¯¯é›†æ˜¯å¯ä»¥è¢«ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼çš„ã€‚</p><p>äº‹å®ä¸Šï¼Œå‡½æ•°æ— è®ºæ˜¯è¿”å› <code>u64</code> è¿˜æ˜¯è¿”å› <code>error</code>ï¼Œå‡ä¼šè¢«è½¬æ¢ä¸º <code>anyerror!u64</code>ã€‚</p><p>è¯¥å‡½æ•°çš„å…·ä½“æ•ˆæœå–å†³äºæˆ‘ä»¬å¦‚ä½•å¯¹å¾…è¿”å›çš„ <code>error</code>:</p><ol><li>è¿”å›é”™è¯¯æ—¶æˆ‘ä»¬å‡†å¤‡ä¸€ä¸ªé»˜è®¤å€¼</li><li>è¿”å›é”™è¯¯æ—¶æˆ‘ä»¬æƒ³å°†å®ƒå‘ä¸Šä¼ é€’</li><li>ç¡®ä¿¡æœ¬æ¬¡å‡½æ•°æ‰§è¡Œåè‚¯å®šä¸ä¼šå‘ç”Ÿé”™è¯¯ï¼Œæƒ³è¦æ— æ¡ä»¶çš„è§£æ„å®ƒ</li><li>é’ˆå¯¹ä¸åŒçš„é”™è¯¯é‡‡å–ä¸åŒçš„å¤„ç†æ–¹å¼</li></ol><h3 id="catch" tabindex="-1"><code>catch</code> <a class="header-anchor" href="#catch" aria-label="Permalink to &quot;\`catch\`&quot;">â€‹</a></h3><p><code>catch</code> ç”¨äºå‘ç”Ÿé”™è¯¯æ—¶æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// æ¥ç€ä¸Šé¢çš„å‡½æ•°å†™</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">doAThing</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">str</span><span style="color:#E1E4E8;">: []</span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">number</span><span style="color:#E1E4E8;"> = </span><span style="color:#B392F0;">parseU64</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">str</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">_</span><span style="color:#E1E4E8;"> = </span><span style="color:#FFAB70;">number</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// æ¥ç€ä¸Šé¢çš„å‡½æ•°å†™</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">doAThing</span><span style="color:#24292E;">(</span><span style="color:#E36209;">str</span><span style="color:#24292E;">: []</span><span style="color:#D73A49;">u8</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">number</span><span style="color:#24292E;"> = </span><span style="color:#6F42C1;">parseU64</span><span style="color:#24292E;">(</span><span style="color:#E36209;">str</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">_</span><span style="color:#24292E;"> = </span><span style="color:#E36209;">number</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><code>number</code> å°†ä¸€å®šæ˜¯ä¸€ä¸ª <code>u64</code> çš„å€¼ï¼Œå½“å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå°†ä¼šæä¾›é»˜è®¤å€¼ 13 ç»™ <code>number</code>ã€‚</p><div class="info custom-block"><p class="custom-block-title">ğŸ…¿ï¸ æç¤º</p><p><code>catch</code> è¿ç®—ç¬¦å³ä¾§å¿…é¡»æ˜¯ä¸€ä¸ªä¸å…¶å·¦ä¾§å‡½æ•°è¿”å›çš„é”™è¯¯è”åˆç±»å‹å±•å¼€åçš„ç±»å‹ä¸€è‡´ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª <code>noreturn</code>(ä¾‹å¦‚panic) çš„è¯­å¥ã€‚</p></div><p>å½“ç„¶è¿›é˜¶ç‚¹æˆ‘ä»¬è¿˜å¯ä»¥å’Œå‘½åï¼ˆnamed Blocksï¼‰åŠŸèƒ½ç»“åˆèµ·æ¥ï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// æ¥ç€ä¸Šé¢çš„å‡½æ•°å†™</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">number</span><span style="color:#E1E4E8;"> = </span><span style="color:#B392F0;">parseU64</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">str</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">blk</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// do things</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;"> :</span><span style="color:#FFAB70;">blk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// æ¥ç€ä¸Šé¢çš„å‡½æ•°å†™</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">number</span><span style="color:#24292E;"> = </span><span style="color:#6F42C1;">parseU64</span><span style="color:#24292E;">(</span><span style="color:#E36209;">str</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> </span><span style="color:#E36209;">blk</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// do things</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">break</span><span style="color:#24292E;"> :</span><span style="color:#E36209;">blk</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><h3 id="try" tabindex="-1">try <a class="header-anchor" href="#try" aria-label="Permalink to &quot;try&quot;">â€‹</a></h3><p><code>try</code> ç”¨äºåœ¨å‡ºç°é”™è¯¯æ—¶ç›´æ¥å‘ä¸Šå±‚è¿”å›é”™è¯¯ï¼Œæ²¡é”™è¯¯å°±æ­£å¸¸æ‰§è¡Œï¼š</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-AwvIv" id="tab-ohY5twR" checked="checked"><label for="tab-ohY5twR">try</label><input type="radio" name="group-AwvIv" id="tab-2JNBDk_"><label for="tab-2JNBDk_">catch å®ç°</label></div><div class="blocks"><div class="language-zig vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">doAThing</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">str</span><span style="color:#E1E4E8;">: []</span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">!void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">number</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">parseU64</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">str</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">_</span><span style="color:#E1E4E8;"> = </span><span style="color:#FFAB70;">number</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">doAThing</span><span style="color:#24292E;">(</span><span style="color:#E36209;">str</span><span style="color:#24292E;">: []</span><span style="color:#D73A49;">u8</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">!void</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">number</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">parseU64</span><span style="color:#24292E;">(</span><span style="color:#E36209;">str</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">_</span><span style="color:#24292E;"> = </span><span style="color:#E36209;">number</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">doAThing</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">str</span><span style="color:#E1E4E8;">: []</span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">!void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">number</span><span style="color:#E1E4E8;"> = </span><span style="color:#B392F0;">parseU64</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">str</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#FFAB70;">err</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">_</span><span style="color:#E1E4E8;"> = </span><span style="color:#FFAB70;">number</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">doAThing</span><span style="color:#24292E;">(</span><span style="color:#E36209;">str</span><span style="color:#24292E;">: []</span><span style="color:#D73A49;">u8</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">!void</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">number</span><span style="color:#24292E;"> = </span><span style="color:#6F42C1;">parseU64</span><span style="color:#24292E;">(</span><span style="color:#E36209;">str</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#E36209;">err</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#E36209;">err</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">_</span><span style="color:#24292E;"> = </span><span style="color:#E36209;">number</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></div></div><p><code>try</code> ä¼šå°è¯•è®¡ç®—è”åˆç±»å‹è¡¨è¾¾å¼ï¼Œå¦‚æœæ˜¯é”™è¯¯ä»å½“å‰å‡½æ•°å‘ä¸Šè¿”å›ï¼Œå¦åˆ™è§£æ„å®ƒã€‚</p><div class="info custom-block"><p class="custom-block-title">ğŸ…¿ï¸ æç¤º</p><p>é‚£ä¹ˆå¦‚ä½•å‡å®šå‡½æ•°ä¸ä¼šè¿”å›é”™è¯¯å‘¢ï¼Ÿ</p><p>ä½¿ç”¨ <code>unreachable</code>ï¼Œè¿™ä¼šå‘Šè¯‰ç¼–è¯‘å™¨æ­¤æ¬¡å‡½æ•°æ‰§è¡Œä¸ä¼šè¿”å›é”™è¯¯ï¼Œ<code>unreachable</code> åœ¨ <code>Debug</code> å’Œ <code>ReleaseSafe</code> æ¨¡å¼ä¸‹ä¼šäº§ç”Ÿææ…Œï¼Œåœ¨ <code>ReleaseFast</code> å’Œ <code>ReleaseSmall</code> æ¨¡å¼ä¸‹ä¼šäº§ç”Ÿæœªå®šä¹‰çš„è¡Œä¸ºã€‚æ‰€ä»¥å½“è°ƒè¯•åº”ç”¨ç¨‹åºæ—¶ï¼Œå¦‚æœå‡½æ•°æ‰§è¡Œåˆ°äº†è¿™é‡Œï¼Œé‚£å°±ä¼šå‘ç”Ÿ <code>panic</code>ã€‚</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">number</span><span style="color:#E1E4E8;"> = </span><span style="color:#B392F0;">parseU64</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;1234&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">unreachable</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">number</span><span style="color:#24292E;"> = </span><span style="color:#6F42C1;">parseU64</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;1234&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">unreachable</span><span style="color:#24292E;">;</span></span></code></pre></div></div><details class="details custom-block"><summary>æ›´åŠ è¿›é˜¶çš„é”™è¯¯å¤„ç†æ–¹æ¡ˆ</summary><p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦é’ˆå¯¹ä¸åŒçš„é”™è¯¯åšæ›´ä¸ºç»†è‡´çš„å¤„ç†ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥å°† <code>if</code> å’Œ <code>switch</code> è”åˆèµ·æ¥ï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">doAThing</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">str</span><span style="color:#E1E4E8;">: []</span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">parseU64</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">str</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">)) </span><span style="color:#F97583;">|</span><span style="color:#FFAB70;">number</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">doSomethingWithNumber</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">number</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#FFAB70;">err</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">Overflow</span><span style="color:#E1E4E8;"> =&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// å¤„ç†æº¢å‡º</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// æ­¤å¤„å‡å®šè¿™ä¸ªé”™è¯¯ä¸ä¼šå‘ç”Ÿ</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">InvalidChar</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#F97583;">unreachable</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// è¿™é‡Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ else æ¥æ•è·é¢å¤–çš„é”™è¯¯</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// else =&gt; |leftover_err| return leftover_err,</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">doAThing</span><span style="color:#24292E;">(</span><span style="color:#E36209;">str</span><span style="color:#24292E;">: []</span><span style="color:#D73A49;">u8</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">parseU64</span><span style="color:#24292E;">(</span><span style="color:#E36209;">str</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">)) </span><span style="color:#D73A49;">|</span><span style="color:#E36209;">number</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">doSomethingWithNumber</span><span style="color:#24292E;">(</span><span style="color:#E36209;">number</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#E36209;">err</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">err</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">.</span><span style="color:#E36209;">Overflow</span><span style="color:#24292E;"> =&gt; {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// å¤„ç†æº¢å‡º</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// æ­¤å¤„å‡å®šè¿™ä¸ªé”™è¯¯ä¸ä¼šå‘ç”Ÿ</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">.</span><span style="color:#E36209;">InvalidChar</span><span style="color:#24292E;"> =&gt; </span><span style="color:#D73A49;">unreachable</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// è¿™é‡Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ else æ¥æ•è·é¢å¤–çš„é”™è¯¯</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// else =&gt; |leftover_err| return leftover_err,</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></details><details class="details custom-block"><summary>ä¸å¤„ç†é”™è¯¯</summary><p>å¦‚æœä¸æƒ³å¤„ç†é”™è¯¯æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>ç›´æ¥åœ¨æ•è·é”™è¯¯çš„åœ°æ–¹ä½¿ç”¨ <code>_</code> æ¥é€šçŸ¥ç¼–è¯‘å™¨å¿½ç•¥å®ƒå³å¯ã€‚</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">doADifferentThing</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">str</span><span style="color:#E1E4E8;">: []</span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">parseU64</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">str</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">)) </span><span style="color:#F97583;">|</span><span style="color:#FFAB70;">number</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">doSomethingWithNumber</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">number</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#FFAB70;">_</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œåšç‚¹é¢å¤–çš„äº‹æƒ…</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">doADifferentThing</span><span style="color:#24292E;">(</span><span style="color:#E36209;">str</span><span style="color:#24292E;">: []</span><span style="color:#D73A49;">u8</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">parseU64</span><span style="color:#24292E;">(</span><span style="color:#E36209;">str</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">)) </span><span style="color:#D73A49;">|</span><span style="color:#E36209;">number</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">doSomethingWithNumber</span><span style="color:#24292E;">(</span><span style="color:#E36209;">number</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#E36209;">_</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œåšç‚¹é¢å¤–çš„äº‹æƒ…</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></details><h3 id="errdefer" tabindex="-1">errdefer <a class="header-anchor" href="#errdefer" aria-label="Permalink to &quot;errdefer&quot;">â€‹</a></h3><p><code>errdefer</code> å¯ä»¥çœ‹ä½œæ—¶ <code>defer</code> çš„ä¸€ä¸ªç‰¹æ®Šå˜ä½“ï¼Œå®ƒç”¨äºå¤„ç†é”™è¯¯ï¼Œä»…åœ¨å‡½æ•°ä½œç”¨åŸŸè¿”å›é”™è¯¯æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œ <code>errdefer</code>ã€‚</p><p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ•è·è¯­æ³•æ¥æ•è·é”™è¯¯ï¼Œè¿™å¯¹äºåœ¨æ¸…ç†æœŸé—´æ‰“å°é”™è¯¯ä¿¡æ¯å¾ˆæœ‰ç”¨ã€‚</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">deferErrorCaptureExample</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">errdefer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#FFAB70;">err</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">std</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">debug</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;the error is {s}</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, .{</span><span style="color:#79B8FF;">@errorName</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;">)});</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">DeferError</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">deferErrorCaptureExample</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!void</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">errdefer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#E36209;">err</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">std</span><span style="color:#24292E;">.</span><span style="color:#E36209;">debug</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;the error is {s}</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">, .{</span><span style="color:#005CC5;">@errorName</span><span style="color:#24292E;">(</span><span style="color:#E36209;">err</span><span style="color:#24292E;">)});</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">.</span><span style="color:#E36209;">DeferError</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">ğŸ…¿ï¸ æç¤º</p><p><code>defer</code> å’Œ <code>errdefer</code>ç»“åˆä½¿ç”¨ï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createFoo</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">param</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">i32</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">!</span><span style="color:#FFAB70;">Foo</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">foo</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tryToAllocateFoo</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ç”³è¯·ä¸€å—å†…å­˜ï¼Œå¦‚æœå‡½æ•°æ‰§è¡ŒæˆåŠŸå°±æ­£å¸¸è¿”å›å®ƒï¼Œå¦åˆ™æˆ‘ä»¬éœ€è¦é‡Šæ”¾è¿™ä¸ªå—å†…å­˜</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">errdefer</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">deallocateFoo</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">foo</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">tmp_buf</span><span style="color:#E1E4E8;"> = </span><span style="color:#B392F0;">allocateTmpBuffer</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">orelse</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">OutOfMemory</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ç”¨äºæ¥ç¦»å¼€ä½œç”¨åŸŸå‰æ¸…ç†æ‰tmp_bufè¿™ä¸ªä¸´æ—¶èµ„æº</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">defer</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">deallocateTmpBuffer</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">tmp_buf</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">param</span><span style="color:#E1E4E8;"> &gt; </span><span style="color:#79B8FF;">1337</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">InvalidParam</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// å¦‚æœå‡½æ•°å¯ä»¥æ‰§è¡Œåˆ°è¿™é‡Œï¼Œé‚£ä¹ˆ errdefer å°†ä¸ä¼šæ‰§è¡Œ</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ä½† defer ä¼šæ‰§è¡Œ</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">foo</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createFoo</span><span style="color:#24292E;">(</span><span style="color:#E36209;">param</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">i32</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">!</span><span style="color:#E36209;">Foo</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">foo</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tryToAllocateFoo</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ç”³è¯·ä¸€å—å†…å­˜ï¼Œå¦‚æœå‡½æ•°æ‰§è¡ŒæˆåŠŸå°±æ­£å¸¸è¿”å›å®ƒï¼Œå¦åˆ™æˆ‘ä»¬éœ€è¦é‡Šæ”¾è¿™ä¸ªå—å†…å­˜</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">errdefer</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">deallocateFoo</span><span style="color:#24292E;">(</span><span style="color:#E36209;">foo</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">tmp_buf</span><span style="color:#24292E;"> = </span><span style="color:#6F42C1;">allocateTmpBuffer</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">orelse</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">.</span><span style="color:#E36209;">OutOfMemory</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ç”¨äºæ¥ç¦»å¼€ä½œç”¨åŸŸå‰æ¸…ç†æ‰tmp_bufè¿™ä¸ªä¸´æ—¶èµ„æº</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">defer</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">deallocateTmpBuffer</span><span style="color:#24292E;">(</span><span style="color:#E36209;">tmp_buf</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">param</span><span style="color:#24292E;"> &gt; </span><span style="color:#005CC5;">1337</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">.</span><span style="color:#E36209;">InvalidParam</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å¦‚æœå‡½æ•°å¯ä»¥æ‰§è¡Œåˆ°è¿™é‡Œï¼Œé‚£ä¹ˆ errdefer å°†ä¸ä¼šæ‰§è¡Œ</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ä½† defer ä¼šæ‰§è¡Œ</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#E36209;">foo</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæ‚¨å¯ä»¥è·å¾—å¼ºå¤§çš„é”™è¯¯å¤„ç†èƒ½åŠ›ï¼Œè€Œæ— éœ€å°è¯•ç¡®ä¿è¦†ç›–æ¯ä¸ªé€€å‡ºè·¯å¾„çš„å†—é•¿å’Œè®¤çŸ¥å¼€é”€ã€‚é‡Šæ”¾ä»£ç å§‹ç»ˆç´§è·Ÿåœ¨åˆ†é…ä»£ç ä¹‹åã€‚</p></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>å…³äº <code>defer</code> å’Œ <code>errdefer</code>ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœä»–ä»¬åœ¨ <code>for</code> å¾ªç¯çš„ä½œç”¨åŸŸä¸­ï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šåœ¨ <code>for</code> å¾ªç¯ç»“æŸå‰æ‰§è¡Œ <code>defer</code> å’Œ <code>errdefer</code>ã€‚ åœ¨ä½¿ç”¨è¯¥ç‰¹æ€§æ—¶éœ€è¦è°¨æ…å¯¹å¾…</p></div><h3 id="åˆå¹¶å’Œæ¨æ–­é”™è¯¯" tabindex="-1">åˆå¹¶å’Œæ¨æ–­é”™è¯¯ <a class="header-anchor" href="#åˆå¹¶å’Œæ¨æ–­é”™è¯¯" aria-label="Permalink to &quot;åˆå¹¶å’Œæ¨æ–­é”™è¯¯&quot;">â€‹</a></h3><p>ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>||</code> è¿ç®—ç¬¦å°†ä¸¤ä¸ªé”™è¯¯åˆå¹¶åˆ°ä¸€èµ·ï¼Œæ³¨æ„ï¼Œæ–‡æ¡£æ³¨é‡Šä¼šä¼˜å…ˆä½¿ç”¨è¿ç®—ç¬¦å·¦ä¾§çš„æ³¨é‡Šã€‚</p><p>æ¨æ–­é”™è¯¯é›†ï¼Œäº‹å®ä¸Šæˆ‘ä»¬ä½¿ç”¨çš„ <code>!T</code> å°±æ˜¯æ¨æ–­é”™è¯¯é›†ï¼Œæˆ‘ä»¬å¹¶æœªæ˜¾ç¤ºå£°æ˜è¿”å›çš„é”™è¯¯ï¼Œè¿”å›çš„é”™è¯¯ç±»å‹å°†ä¼šç”± zig ç¼–è¯‘å™¨è‡ªè¡Œæ¨å¯¼è€Œå‡ºï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç‰¹æ€§ï¼Œä½†æœ‰æ—¶ä¹Ÿä¼šç»™æˆ‘ä»¬å¸¦æ¥å›°æ‰°ã€‚</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// ç”±ç¼–è¯‘å™¨æ¨å¯¼è€Œå‡ºçš„é”™è¯¯é›†</span></span>
<span class="line"><span style="color:#F97583;">pub</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">add_inferred</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">comptime</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">T</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">type</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">: </span><span style="color:#FFAB70;">T</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">b</span><span style="color:#E1E4E8;">: </span><span style="color:#FFAB70;">T</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">!</span><span style="color:#FFAB70;">T</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">ov</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">@addWithOverflow</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">b</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">ov</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">Overflow</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">ov</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// æ˜ç¡®å£°æ˜çš„é”™è¯¯é›†</span></span>
<span class="line"><span style="color:#F97583;">pub</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">add_explicit</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">comptime</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">T</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">type</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">: </span><span style="color:#FFAB70;">T</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">b</span><span style="color:#E1E4E8;">: </span><span style="color:#FFAB70;">T</span><span style="color:#E1E4E8;">) </span><span style="color:#FFAB70;">Error</span><span style="color:#F97583;">!</span><span style="color:#FFAB70;">T</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">ov</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">@addWithOverflow</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">b</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">ov</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">Overflow</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">ov</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">Error</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">Overflow</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// ç”±ç¼–è¯‘å™¨æ¨å¯¼è€Œå‡ºçš„é”™è¯¯é›†</span></span>
<span class="line"><span style="color:#D73A49;">pub</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">add_inferred</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">comptime</span><span style="color:#24292E;"> </span><span style="color:#E36209;">T</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">type</span><span style="color:#24292E;">, </span><span style="color:#E36209;">a</span><span style="color:#24292E;">: </span><span style="color:#E36209;">T</span><span style="color:#24292E;">, </span><span style="color:#E36209;">b</span><span style="color:#24292E;">: </span><span style="color:#E36209;">T</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">!</span><span style="color:#E36209;">T</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">ov</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">@addWithOverflow</span><span style="color:#24292E;">(</span><span style="color:#E36209;">a</span><span style="color:#24292E;">, </span><span style="color:#E36209;">b</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">ov</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">.</span><span style="color:#E36209;">Overflow</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#E36209;">ov</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">];</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// æ˜ç¡®å£°æ˜çš„é”™è¯¯é›†</span></span>
<span class="line"><span style="color:#D73A49;">pub</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">add_explicit</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">comptime</span><span style="color:#24292E;"> </span><span style="color:#E36209;">T</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">type</span><span style="color:#24292E;">, </span><span style="color:#E36209;">a</span><span style="color:#24292E;">: </span><span style="color:#E36209;">T</span><span style="color:#24292E;">, </span><span style="color:#E36209;">b</span><span style="color:#24292E;">: </span><span style="color:#E36209;">T</span><span style="color:#24292E;">) </span><span style="color:#E36209;">Error</span><span style="color:#D73A49;">!</span><span style="color:#E36209;">T</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">ov</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">@addWithOverflow</span><span style="color:#24292E;">(</span><span style="color:#E36209;">a</span><span style="color:#24292E;">, </span><span style="color:#E36209;">b</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">ov</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">.</span><span style="color:#E36209;">Overflow</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#E36209;">ov</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">];</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">Error</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">error</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">Overflow</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">ğŸ…¿ï¸ æç¤º</p><p>å½“å‡½æ•°ä½¿ç”¨æ¨å¯¼é”™è¯¯é›†æ—¶ï¼Œè¿™ä¸ªå‡½æ•°ç›¸å¯¹æ¥è¯´ä¼šå˜å¾—æ›´åŠ çš„é€šç”¨ï¼Œä½†åœ¨æ‰§è¡ŒæŸäº›æ“ä½œæ—¶ä¼šå˜å¾—æœ‰äº›æ£˜æ‰‹ï¼Œä¾‹å¦‚è·å–å‡½æ•°æŒ‡é’ˆæˆ–è€…åœ¨ä¸åŒæ„å»ºç›®æ ‡ä¹‹é—´ä¿æŒç›¸åŒçš„é”™è¯¯é›†åˆã€‚å¦å¤–ï¼Œæ¨å¯¼é”™è¯¯å’Œé€’å½’å¹¶ä¸å…¼å®¹ã€‚</p><p>ä¸Šé¢è¿™å¥è¯çœ‹èµ·æ¥æœ‰ç‚¹äº‘é‡Œé›¾é‡Œï¼Œæˆ‘ä»¬æ¥ä¸¤ä¸ªä¾‹å­æ¥è¯´æ˜å°±å¯ä»¥ï¼š</p><ol><li>ä¸åŒæ„å»ºç›®æ ‡ä¹‹é—´å¯èƒ½å­˜åœ¨ç€ä¸“å±äºæ¶æ„çš„é”™è¯¯å®šä¹‰ï¼Œè¿™ä½¿å¾—åœ¨ä¸åŒæ¶æ„ä¸Šæ„å»ºå‡ºæ¥çš„ä»£ç çš„å®é™…é”™è¯¯é›†å¹¶ä¸ç›¸åŒï¼Œå‡½æ•°ä¹ŸåŒç†ï¼ˆä¸cpuæŒ‡ä»¤é›†å®ç°æœ‰å…³ï¼‰ã€‚</li><li>å½“æˆ‘ä»¬ä½¿ç”¨è‡ªåŠ¨æ¨å¯¼æ—¶ï¼Œæ¨å¯¼å‡ºçš„é”™è¯¯é›†æ˜¯æœ€å°é”™è¯¯é›†ï¼Œæ•…å¯èƒ½ä¸€ä¸ªå‡½æ•°è¢«æ¨å¯¼å‡º <code>ErrorSetOne!type</code> å’Œ <code>ErrorSetTwo!type</code> ä¸¤ä¸ªé”™è¯¯é›†ï¼Œè¿™å°±ä½¿å¾—åœ¨é€’å½’ä¸Šå‡ºç°äº†ä¸å…¼å®¹ï¼Œä¸è¿‡å¯ä»¥ä½¿ç”¨ <code>switch</code> æ¥åŒ¹é…é”™è¯¯é›†æ¥è§£å†³è¯¥é—®é¢˜ã€‚</li></ol><p>å¯¹äºä¸Šé¢çš„é—®é¢˜ï¼Œå…¶å®æ›´å¥½çš„è§£å†³åŠæ³•å°±æ˜¯æ˜¾ç¤ºå£°æ˜ä¸€ä¸ªé”™è¯¯é›†ï¼Œè¿™ä¼šæ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨è¿”å›çš„é”™è¯¯ç§ç±»éƒ½æœ‰ä»€ä¹ˆã€‚</p><blockquote><p><em>æ ¹æ®æ–‡æ¡£è¯´æ˜ï¼Œä¸Šé¢çš„è¿™äº›é™åˆ¶å¯èƒ½åœ¨æœªæ¥ä¼šè¢«æ”¹å–„ã€‚</em></p></blockquote></div><h2 id="å †æ ˆè·Ÿè¸ª" tabindex="-1">å †æ ˆè·Ÿè¸ª <a class="header-anchor" href="#å †æ ˆè·Ÿè¸ª" aria-label="Permalink to &quot;å †æ ˆè·Ÿè¸ª&quot;">â€‹</a></h2><p>zig æœ¬èº«æœ‰ç€è‰¯å¥½çš„é”™è¯¯å †æ ˆè·Ÿè¸ªï¼Œé”™è¯¯å †æ ˆè·Ÿè¸ªæ˜¾ç¤ºä»£ç ä¸­å°†é”™è¯¯è¿”å›åˆ°è°ƒç”¨å‡½æ•°çš„æ‰€æœ‰ç‚¹ã€‚è¿™ä½¿å¾—åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ try éƒ½å¾ˆå®ç”¨ï¼Œå¹¶ä¸”å¦‚æœé”™è¯¯æœ€ç»ˆä»åº”ç”¨ç¨‹åºä¸­ä¸€ç›´å†’å‡ºæ¥ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“èƒ½å¤ŸçŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p><p>å…·ä½“çš„ä¿¡æ¯å¯è§<a href="https://ziglang.org/documentation/master/#Error-Return-Traces" target="_blank" rel="noreferrer">è¿™é‡Œ</a>ã€‚</p><p>å®Œæ•´å †æ ˆè·Ÿè¸ªç”Ÿæ•ˆçš„ä¸‰ä¸ªæ–¹å¼ï¼Œä» <code>main</code> è¿”å›ä¸€ä¸ªé”™è¯¯ã€ä½¿ç”¨ <code>catch unreachable</code> æ•è·çš„é”™è¯¯ã€ä½¿ç”¨<code>@errorReturnTrace</code>ã€‚</p><p>å…·ä½“çš„å †æ ˆè·Ÿè¸ªå®ç°ç»†èŠ‚å¯ä»¥çœ‹<a href="https://ziglang.org/documentation/master/#Implementation-Details" target="_blank" rel="noreferrer">è¿™é‡Œ</a>ã€‚</p>`,56),e=[o];function c(r,t,E,y,i,F){return n(),a("div",null,e)}const u=s(p,[["render",c]]);export{A as __pageData,u as default};
