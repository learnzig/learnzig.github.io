import{_ as i,o as s,c as a,R as e}from"./chunks/framework.ekaVIUcx.js";const u=JSON.parse('{"title":"æ‚é¡¹","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"more/miscellaneous.md","filePath":"more/miscellaneous.md","lastUpdated":1701705890000}'),t={name:"more/miscellaneous.md"},l=e('<h1 id="æ‚é¡¹" tabindex="-1">æ‚é¡¹ <a class="header-anchor" href="#æ‚é¡¹" aria-label="Permalink to &quot;æ‚é¡¹&quot;">â€‹</a></h1><p>æœ¬éƒ¨åˆ†æ˜¯å…³äº zig ä¸€äº›é¢å¤–çŸ¥è¯†çš„è¡¥å……ï¼Œæš‚æ—¶è¿˜æ²¡æœ‰å†³å®šå¥½åˆ†ç±»åˆ°ä½•å¤„ï¼</p><h2 id="ä¸ºä»€ä¹ˆ-zig-å¯ä»¥åšåˆ°æ¯”-c-æ›´å¥½çš„é“¾æ¥" tabindex="-1">ä¸ºä»€ä¹ˆ zig å¯ä»¥åšåˆ°æ¯” c æ›´å¥½çš„é“¾æ¥ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-zig-å¯ä»¥åšåˆ°æ¯”-c-æ›´å¥½çš„é“¾æ¥" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆ zig å¯ä»¥åšåˆ°æ¯” c æ›´å¥½çš„é“¾æ¥&quot;">â€‹</a></h2><p>å®é™…ä¸Šï¼Œzig æœ¬èº«å®ç°äº†ä¸€ä¸ª C çš„ç¼–è¯‘å™¨ï¼Œå½“ç„¶ä¸ä»…ä»…å¦‚æ­¤ï¼Œzig è¿˜æä¾›äº†ä¸€ä¸ªæ¯”è¾ƒ <strong><em>magic</em></strong> çš„ä¸œè¥¿â€”â€” <a href="https://github.com/ziglang/glibc-abi-tool" target="_blank" rel="noreferrer"><code>glibc-abi-tool</code></a>ï¼Œè¿™æ˜¯ä¸€ä¸ªæ”¶é›†æ¯ä¸ªç‰ˆæœ¬çš„ glibc çš„ <code>.abilist</code> æ–‡ä»¶çš„å­˜å‚¨åº“ï¼Œè¿˜åŒ…å«ä¸€ä¸ªå°†å®ƒä»¬ç»„åˆæˆä¸€ä¸ªæ•°æ®é›†çš„å·¥å…·ã€‚</p><p>æ‰€ä»¥ï¼Œzig æœ¬èº«æ‰€è°“çš„ â€œ<strong><em>ships with libc</em></strong>â€ å¹¶ä¸å‡†ç¡®ï¼Œå®ƒçš„ç¡®åˆ†å‘ libcï¼Œä½†å®ƒåªæºå¸¦æ¯ä¸ªç‰ˆæœ¬çš„ç¬¦å·åº“ï¼Œä»…ä¾èµ–è¿™ä¸ªç¬¦å·åº“ï¼Œzig å°±å¯ä»¥å®ç°åœ¨æ²¡æœ‰ libc çš„æƒ…å†µä¸‹ä»ç„¶æ­£ç¡®åœ°è¿›è¡ŒåŠ¨æ€é“¾æ¥ï¼</p><div class="info custom-block"><p class="custom-block-title">ğŸ…¿ï¸ æç¤º</p><p>ç”±äºè¿™ç§ç‰¹æ€§ï¼Œè¿™å¯¼è‡´ zig å°½ç®¡æºå¸¦äº† 40 ä¸ª libcï¼Œå´ä»ç„¶èƒ½ä¿æŒ 45MBï¼ˆlinux-x86-64ï¼‰å·¦å³çš„å¤§å°ï¼Œä½œä¸ºå¯¹æ¯” llvm åˆ†å‘çš„ clang å®Œæ•´çš„å·¥å…·é“¾çš„å¤§å°å¤šè¾¾å¥½å‡ ç™¾ Mã€‚</p><p>å…³äºæ›´å¤šçš„ç»†èŠ‚ï¼Œä½ å¯ä»¥å‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š</p><ul><li><a href="https://github.com/ziglang/zig/blob/0.4.0/libc/process_headers.zig" target="_blank" rel="noreferrer">process_headers tool</a></li><li><a href="https://github.com/ziglang/zig/wiki/Updating-libc" target="_blank" rel="noreferrer">Updating libc</a></li><li><a href="https://news.ycombinator.com/item?id=29538264" target="_blank" rel="noreferrer">hacker news</a></li></ul></div><h2 id="zig-èƒ½é™æ€é“¾æ¥-libc-å—" tabindex="-1">zig èƒ½é™æ€é“¾æ¥ libc å—ï¼Ÿ <a class="header-anchor" href="#zig-èƒ½é™æ€é“¾æ¥-libc-å—" aria-label="Permalink to &quot;zig èƒ½é™æ€é“¾æ¥ libc å—ï¼Ÿ&quot;">â€‹</a></h2><p>èƒ½ï¼Œåˆä¸èƒ½ï¼</p><p>zig æ”¯æŒé™æ€é“¾æ¥ muslï¼ˆé’ˆå¯¹linuxçš„å¦ä¸€ä¸ª libcï¼Œç›®æ ‡ä¸ºåµŒå…¥å¼ç³»ç»Ÿä¸ç§»åŠ¨è®¾å¤‡ï¼‰ï¼Œå…¶ä»–ä»…æ”¯æŒåŠ¨æ€é“¾æ¥ã€‚å—ç›Šäºè¿™ç§ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä½œä¸º C ç¼–è¯‘å™¨çš„æ›¿ä»£å“ä½¿ç”¨ï¼Œå®ƒå¯ä»¥æä¾›æ›´åŠ å®Œå–„çš„å·¥å…·é“¾ã€‚</p><p>ä¸¾ä¸ªæ¯”è¾ƒ<em>å‰‘èµ°åé”‹</em>çš„ä¾‹å­ï¼Œgo çš„ cgo ç‰¹æ€§ä¸€ç›´ä¸ºäººä»¬æ‰€åæ§½ï¼Œä¸€æ—¦ä½¿ç”¨äº†å®ƒï¼ŒåŸºæœ¬å°±è¦å’Œ go å®£ç§°çš„éå¸¸æ–¹ä¾¿çš„äº¤å‰ç¼–è¯‘è¯´æ‹œæ‹œäº†ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ zig æ¥å¸®åŠ©æˆ‘ä»¬å®ç° cgo çš„äº¤å‰ç¼–è¯‘ï¼š</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CC</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zig cc -target x86_64-linux-gnu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CXX</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zig cc -target x86_64-linux-gnu&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><p>è®¾ç½® zig ä½œä¸º C ç¼–è¯‘å™¨æ¥ä¾› go ä½¿ç”¨ï¼Œåªè¦å¯¹ zig å’Œ go è®¾ç½®æ­£ç¡®çš„targetï¼Œå°±å¯ä»¥åœ¨æœ¬æœºå®ç°å®Œå–„çš„äº¤å‰ç¼–è¯‘ã€‚</p><p>å†è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ„å»ºå‡º linux çš„ä½¿ç”¨ cgo çš„é™æ€é“¾æ¥çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼š</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CC</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zig cc -target x86_64-linux-musl&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CXX</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zig cc -target x86_64-linux-musl&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CGO_CFLAGS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;-D_LARGEFILE64_SOURCE&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ldflags=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;-linkmode=external -extldflags -static&#39;</span></span></code></pre></div><p>ä¸Šæ–¹çš„ <code>CGO_CFLAGS</code> æ˜¯ä¸ºäº†é˜²æ­¢ç¼–è¯‘å¤±è´¥ï¼Œ<code>ldfalgs</code> æ˜¯ä¸ºäº†æŒ‡å®šé™æ€é“¾æ¥ï¼</p>',15),n=[l];function h(p,r,o,c,g,d){return s(),a("div",null,n)}const b=i(t,[["render",h]]);export{u as __pageData,b as default};
