import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.gI2xCOxE.js";const d=JSON.parse('{"title":"Switch","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"basic/process_control/switch.md","filePath":"basic/process_control/switch.md","lastUpdated":1700294602000}'),p={name:"basic/process_control/switch.md"},o=l(`<h1 id="switch" tabindex="-1">Switch <a class="header-anchor" href="#switch" aria-label="Permalink to &quot;Switch&quot;">â€‹</a></h1><p>switch è¯­å¥å¯ä»¥è¿›è¡ŒåŒ¹é…ï¼Œå¹¶ä¸”switchåŒ¹é…ä¸èƒ½å‡ºç°é—æ¼åŒ¹é…çš„æƒ…å†µã€‚</p><h2 id="åŸºæœ¬ä½¿ç”¨" tabindex="-1">åŸºæœ¬ä½¿ç”¨ <a class="header-anchor" href="#åŸºæœ¬ä½¿ç”¨" aria-label="Permalink to &quot;åŸºæœ¬ä½¿ç”¨&quot;">â€‹</a></h2><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-LKMOI" id="tab-ZSuiqUH" checked="checked"><label for="tab-ZSuiqUH">default</label><input type="radio" name="group-LKMOI" id="tab-wr3oqDz"><label for="tab-wr3oqDz">more</label></div><div class="blocks"><div class="language-zig vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">num</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">num</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> =&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;this is 5</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, .{});</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> =&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;this is not 5</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, .{});</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> </span><span style="color:#E36209;">num</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u8</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">num</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> =&gt; {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;this is 5</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">, .{});</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> =&gt; {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;this is not 5</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">, .{});</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">std</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">@import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;std&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">print</span><span style="color:#E1E4E8;"> = </span><span style="color:#FFAB70;">std</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">debug</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">print</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">pub</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">num</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">num</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> =&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;this is 5</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, .{});</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> =&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;this is not 5</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, .{});</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">std</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">@import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;std&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">print</span><span style="color:#24292E;"> = </span><span style="color:#E36209;">std</span><span style="color:#24292E;">.</span><span style="color:#E36209;">debug</span><span style="color:#24292E;">.</span><span style="color:#E36209;">print</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">pub</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!void</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> </span><span style="color:#E36209;">num</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u8</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">num</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> =&gt; {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;this is 5</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">, .{});</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> =&gt; {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;this is not 5</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">, .{});</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></div></div><div class="info custom-block"><p class="custom-block-title">ğŸ…¿ï¸ æç¤º</p><p>switch çš„åŒ¹é…å¿…é¡»è¦è¦ç©·å°½æ‰€æœ‰ï¼Œæˆ–è€…å…·æœ‰ <code>else</code> åˆ†æ”¯ï¼</p></div><h2 id="è¿›é˜¶ä½¿ç”¨" tabindex="-1">è¿›é˜¶ä½¿ç”¨ <a class="header-anchor" href="#è¿›é˜¶ä½¿ç”¨" aria-label="Permalink to &quot;è¿›é˜¶ä½¿ç”¨&quot;">â€‹</a></h2><p>switch è¿˜æ”¯æŒç”¨ <code>,</code> åˆ†å‰²çš„å¤šåŒ¹é…ã€<code>...</code> çš„èŒƒå›´é€‰æ‹©ç¬¦ï¼Œç±»ä¼¼å¾ªç¯ä¸­çš„ <code>tag</code> è¯­æ³•ã€ç¼–è¯‘æœŸè¡¨è¾¾å¼ï¼Œä»¥ä¸‹æ˜¯æ¼”ç¤ºï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u64</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">zz</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u64</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">103</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä½œä¸ºè¡¨è¾¾å¼ä½¿ç”¨</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">b</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// å¤šåŒ¹é…é¡¹</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// èŒƒå›´åŒ¹é…</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">...</span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// tagå½¢å¼çš„åˆ†é…åŒ¹é…ï¼Œå¯ä»¥ä»»æ„å¤æ‚</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">101</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#FFAB70;">blk</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u64</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// ä¸‹ä¸€è¡Œä»£è¡¨è¿”å›åˆ°blkè¿™ä¸ªtagå¤„</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;"> :</span><span style="color:#FFAB70;">blk</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">zz</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#FFAB70;">zz</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// æ”¯æŒç¼–è¯‘æœŸè¿ç®—</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">blk</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u32</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u32</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;"> :</span><span style="color:#FFAB70;">blk</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    } =&gt; </span><span style="color:#79B8FF;">107</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// else åŒ¹é…å‰©ä½™çš„åˆ†æ”¯</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">expect</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">b</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">a</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u64</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">zz</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u64</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">103</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä½œä¸ºè¡¨è¾¾å¼ä½¿ç”¨</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">b</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">a</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å¤šåŒ¹é…é¡¹</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> =&gt; </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// èŒƒå›´åŒ¹é…</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">...</span><span style="color:#005CC5;">100</span><span style="color:#24292E;"> =&gt; </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// tagå½¢å¼çš„åˆ†é…åŒ¹é…ï¼Œå¯ä»¥ä»»æ„å¤æ‚</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">101</span><span style="color:#24292E;"> =&gt; </span><span style="color:#E36209;">blk</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">c</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u64</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// ä¸‹ä¸€è¡Œä»£è¡¨è¿”å›åˆ°blkè¿™ä¸ªtagå¤„</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">break</span><span style="color:#24292E;"> :</span><span style="color:#E36209;">blk</span><span style="color:#24292E;"> </span><span style="color:#E36209;">c</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">zz</span><span style="color:#24292E;"> =&gt; </span><span style="color:#E36209;">zz</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// æ”¯æŒç¼–è¯‘æœŸè¿ç®—</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">blk</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">d</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u32</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">e</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u32</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">100</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">break</span><span style="color:#24292E;"> :</span><span style="color:#E36209;">blk</span><span style="color:#24292E;"> </span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#E36209;">e</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    } =&gt; </span><span style="color:#005CC5;">107</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// else åŒ¹é…å‰©ä½™çš„åˆ†æ”¯</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> =&gt; </span><span style="color:#005CC5;">9</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">try</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">expect</span><span style="color:#24292E;">(</span><span style="color:#E36209;">b</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span></code></pre></div><h3 id="ä½œä¸ºè¡¨è¾¾å¼ä½¿ç”¨" tabindex="-1">ä½œä¸ºè¡¨è¾¾å¼ä½¿ç”¨ï¼š <a class="header-anchor" href="#ä½œä¸ºè¡¨è¾¾å¼ä½¿ç”¨" aria-label="Permalink to &quot;ä½œä¸ºè¡¨è¾¾å¼ä½¿ç”¨ï¼š&quot;">â€‹</a></h3><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-RSuax" id="tab-nulq6NX" checked="checked"><label for="tab-nulq6NX">default</label><input type="radio" name="group-RSuax" id="tab-99yodSQ"><label for="tab-99yodSQ">more</label></div><div class="blocks"><div class="language-zig vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">os_msg</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">builtin</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">target</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">os</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">tag</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#FFAB70;">linux</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#9ECBFF;">&quot;we found a linux user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#9ECBFF;">&quot;not a linux user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">os_msg</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">builtin</span><span style="color:#24292E;">.</span><span style="color:#E36209;">target</span><span style="color:#24292E;">.</span><span style="color:#E36209;">os</span><span style="color:#24292E;">.</span><span style="color:#E36209;">tag</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#E36209;">linux</span><span style="color:#24292E;"> =&gt; </span><span style="color:#032F62;">&quot;we found a linux user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> =&gt; </span><span style="color:#032F62;">&quot;not a linux user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">builtin</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">@import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;builtin&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">pub</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">os_msg</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">builtin</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">target</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">os</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">tag</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#FFAB70;">linux</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#9ECBFF;">&quot;we found a linux user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#9ECBFF;">&quot;not a linux user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">_</span><span style="color:#E1E4E8;"> = </span><span style="color:#FFAB70;">os_msg</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">builtin</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">@import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;builtin&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">pub</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!void</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">os_msg</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">builtin</span><span style="color:#24292E;">.</span><span style="color:#E36209;">target</span><span style="color:#24292E;">.</span><span style="color:#E36209;">os</span><span style="color:#24292E;">.</span><span style="color:#E36209;">tag</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#E36209;">linux</span><span style="color:#24292E;"> =&gt; </span><span style="color:#032F62;">&quot;we found a linux user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> =&gt; </span><span style="color:#032F62;">&quot;not a linux user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">_</span><span style="color:#24292E;"> = </span><span style="color:#E36209;">os_msg</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></div></div><h3 id="æ•è·-tag-union" tabindex="-1">æ•è· <code>Tag Union</code> <a class="header-anchor" href="#æ•è·-tag-union" aria-label="Permalink to &quot;æ•è· \`Tag Union\`&quot;">â€‹</a></h3><p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ switch å¯¹æ ‡è®°è”åˆç±»å‹è¿›è¡Œæ•è·æ“ä½œï¼Œå¯¹å­—æ®µå€¼çš„ä¿®æ”¹å¯ä»¥é€šè¿‡åœ¨æ•è·å˜é‡åç§°ä¹‹å‰æ”¾ç½® <code>*</code> å¹¶å°†å…¶è½¬æ¢ä¸ºæŒ‡é’ˆæ¥å®Œæˆï¼š</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-bF93W" id="tab-VaaroPe" checked="checked"><label for="tab-VaaroPe">default</label><input type="radio" name="group-bF93W" id="tab-P3tI0wW"><label for="tab-P3tI0wW">more</label></div><div class="blocks"><div class="language-zig vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">Item</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">union</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">enum</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u32</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;">: </span><span style="color:#FFAB70;">Point</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u32</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;"> = </span><span style="color:#FFAB70;">Item</span><span style="color:#E1E4E8;">{ .</span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;"> = </span><span style="color:#FFAB70;">Point</span><span style="color:#E1E4E8;">{ .</span><span style="color:#FFAB70;">x</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, .</span><span style="color:#FFAB70;">y</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> } };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">b</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// å¤šä¸ªåŒ¹é…</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">Item</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">Item</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#F97583;">|</span><span style="color:#FFAB70;">item</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// å¯ä»¥ä½¿ç”¨ * è¯­æ³•æ¥æ•è·å¯¹åº”çš„æŒ‡é’ˆè¿›è¡Œä¿®æ”¹æ“ä½œ</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">Item</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#F97583;">|*</span><span style="color:#FFAB70;">item</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">blk</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">.</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">x</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;"> :</span><span style="color:#FFAB70;">blk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// è¿™é‡Œæœ€åä¸€ä¸ªè”åˆç±»å‹,åŒ¹é…å·²ç»ç©·å°½äº†ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ä½¿ç”¨elseäº†</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">Item</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">Item</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">union</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">enum</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">a</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u32</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">c</span><span style="color:#24292E;">: </span><span style="color:#E36209;">Point</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">d</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">e</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u32</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> </span><span style="color:#E36209;">a</span><span style="color:#24292E;"> = </span><span style="color:#E36209;">Item</span><span style="color:#24292E;">{ .</span><span style="color:#E36209;">c</span><span style="color:#24292E;"> = </span><span style="color:#E36209;">Point</span><span style="color:#24292E;">{ .</span><span style="color:#E36209;">x</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, .</span><span style="color:#E36209;">y</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> } };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">b</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">a</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å¤šä¸ªåŒ¹é…</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">Item</span><span style="color:#24292E;">.</span><span style="color:#E36209;">a</span><span style="color:#24292E;">, </span><span style="color:#E36209;">Item</span><span style="color:#24292E;">.</span><span style="color:#E36209;">e</span><span style="color:#24292E;"> =&gt; </span><span style="color:#D73A49;">|</span><span style="color:#E36209;">item</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#E36209;">item</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å¯ä»¥ä½¿ç”¨ * è¯­æ³•æ¥æ•è·å¯¹åº”çš„æŒ‡é’ˆè¿›è¡Œä¿®æ”¹æ“ä½œ</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">Item</span><span style="color:#24292E;">.</span><span style="color:#E36209;">c</span><span style="color:#24292E;"> =&gt; </span><span style="color:#D73A49;">|*</span><span style="color:#E36209;">item</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#E36209;">blk</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">item</span><span style="color:#24292E;">.</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">.</span><span style="color:#E36209;">x</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">break</span><span style="color:#24292E;"> :</span><span style="color:#E36209;">blk</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">6</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// è¿™é‡Œæœ€åä¸€ä¸ªè”åˆç±»å‹,åŒ¹é…å·²ç»ç©·å°½äº†ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ä½¿ç”¨elseäº†</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">Item</span><span style="color:#24292E;">.</span><span style="color:#E36209;">d</span><span style="color:#24292E;"> =&gt; </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">std</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">@import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;std&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">pub</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">Point</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">struct</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">x</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">y</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">Item</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">union</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">enum</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u32</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;">: </span><span style="color:#FFAB70;">Point</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u32</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;"> = </span><span style="color:#FFAB70;">Item</span><span style="color:#E1E4E8;">{ .</span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;"> = </span><span style="color:#FFAB70;">Point</span><span style="color:#E1E4E8;">{ .</span><span style="color:#FFAB70;">x</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, .</span><span style="color:#FFAB70;">y</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> } };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">b</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// å¤šä¸ªåŒ¹é…</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">Item</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">Item</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#F97583;">|</span><span style="color:#FFAB70;">item</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// å¯ä»¥ä½¿ç”¨ * è¯­æ³•æ¥æ•è·å¯¹åº”çš„æŒ‡é’ˆè¿›è¡Œä¿®æ”¹æ“ä½œ</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">Item</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">c</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#F97583;">|*</span><span style="color:#FFAB70;">item</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">blk</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">.</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">x</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;"> :</span><span style="color:#FFAB70;">blk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// è¿™é‡Œæœ€åä¸€ä¸ªè”åˆç±»å‹,åŒ¹é…å·²ç»ç©·å°½äº†ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ä½¿ç”¨elseäº†</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">Item</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">std</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">debug</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;{any}</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, .{</span><span style="color:#FFAB70;">b</span><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">std</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">@import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;std&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">pub</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!void</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">Point</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">struct</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">x</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">y</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">Item</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">union</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">enum</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">a</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u32</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">c</span><span style="color:#24292E;">: </span><span style="color:#E36209;">Point</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">d</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">e</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u32</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> </span><span style="color:#E36209;">a</span><span style="color:#24292E;"> = </span><span style="color:#E36209;">Item</span><span style="color:#24292E;">{ .</span><span style="color:#E36209;">c</span><span style="color:#24292E;"> = </span><span style="color:#E36209;">Point</span><span style="color:#24292E;">{ .</span><span style="color:#E36209;">x</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, .</span><span style="color:#E36209;">y</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> } };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">b</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">a</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// å¤šä¸ªåŒ¹é…</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">Item</span><span style="color:#24292E;">.</span><span style="color:#E36209;">a</span><span style="color:#24292E;">, </span><span style="color:#E36209;">Item</span><span style="color:#24292E;">.</span><span style="color:#E36209;">e</span><span style="color:#24292E;"> =&gt; </span><span style="color:#D73A49;">|</span><span style="color:#E36209;">item</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#E36209;">item</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// å¯ä»¥ä½¿ç”¨ * è¯­æ³•æ¥æ•è·å¯¹åº”çš„æŒ‡é’ˆè¿›è¡Œä¿®æ”¹æ“ä½œ</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">Item</span><span style="color:#24292E;">.</span><span style="color:#E36209;">c</span><span style="color:#24292E;"> =&gt; </span><span style="color:#D73A49;">|*</span><span style="color:#E36209;">item</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#E36209;">blk</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#E36209;">item</span><span style="color:#24292E;">.</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">.</span><span style="color:#E36209;">x</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">break</span><span style="color:#24292E;"> :</span><span style="color:#E36209;">blk</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">6</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// è¿™é‡Œæœ€åä¸€ä¸ªè”åˆç±»å‹,åŒ¹é…å·²ç»ç©·å°½äº†ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ä½¿ç”¨elseäº†</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">Item</span><span style="color:#24292E;">.</span><span style="color:#E36209;">d</span><span style="color:#24292E;"> =&gt; </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">std</span><span style="color:#24292E;">.</span><span style="color:#E36209;">debug</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;{any}</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">, .{</span><span style="color:#E36209;">b</span><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></div></div><h3 id="å¯¹æšä¸¾ç±»å‹è¿›è¡Œè‡ªåŠ¨æ¨æ–­" tabindex="-1">å¯¹æšä¸¾ç±»å‹è¿›è¡Œè‡ªåŠ¨æ¨æ–­ <a class="header-anchor" href="#å¯¹æšä¸¾ç±»å‹è¿›è¡Œè‡ªåŠ¨æ¨æ–­" aria-label="Permalink to &quot;å¯¹æšä¸¾ç±»å‹è¿›è¡Œè‡ªåŠ¨æ¨æ–­&quot;">â€‹</a></h3><p>åœ¨ä½¿ç”¨ switch åŒ¹é…æ—¶ï¼Œä¹Ÿå¯ä»¥ç»§ç»­å¯¹æšä¸¾ç±»å‹è¿›è¡Œè‡ªåŠ¨æ¨æ–­ï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">Color</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">enum</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">auto</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">off</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">on</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">color</span><span style="color:#E1E4E8;"> = </span><span style="color:#FFAB70;">Color</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">off</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">// ç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬å®Œæˆå…¶ä½™çš„å·¥ä½œ</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">result</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">color</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#FFAB70;">auto</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#F97583;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#FFAB70;">on</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#F97583;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#FFAB70;">off</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#F97583;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">Color</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">enum</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">auto</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">off</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">on</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">color</span><span style="color:#24292E;"> = </span><span style="color:#E36209;">Color</span><span style="color:#24292E;">.</span><span style="color:#E36209;">off</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">// ç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬å®Œæˆå…¶ä½™çš„å·¥ä½œ</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">result</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">color</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#E36209;">auto</span><span style="color:#24292E;"> =&gt; </span><span style="color:#D73A49;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#E36209;">on</span><span style="color:#24292E;"> =&gt; </span><span style="color:#D73A49;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#E36209;">off</span><span style="color:#24292E;"> =&gt; </span><span style="color:#D73A49;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><h3 id="å†…è”-switch" tabindex="-1">å†…è” switch <a class="header-anchor" href="#å†…è”-switch" aria-label="Permalink to &quot;å†…è” switch&quot;">â€‹</a></h3><p>switch çš„åˆ†æ”¯å¯ä»¥æ ‡è®°ä¸º <code>inline</code> æ¥è¦æ±‚ç¼–è¯‘å™¨ç”Ÿæˆè¯¥åˆ†æ”¯å¯¹åº”çš„æ‰€æœ‰å¯èƒ½åˆ†æ”¯ï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// è¿™æ®µå‡½æ•°ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªç»“æ„ä½“çš„å­—æ®µæ˜¯å¦æ˜¯ optinalï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ comptime çš„</span></span>
<span class="line"><span style="color:#6A737D;">// æ•…æˆ‘ä»¬å¯ä»¥åœ¨ä¸‹é¢ä½¿ç”¨inline æ¥è¦æ±‚ç¼–è¯‘å™¨å¸®æˆ‘ä»¬å±•å¼€è¿™ä¸ªswitch</span></span>
<span class="line"><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isFieldOptional</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">comptime</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">T</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">type</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">field_index</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">usize</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">!bool</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">fields</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">@typeInfo</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">T</span><span style="color:#E1E4E8;">).</span><span style="color:#FFAB70;">Struct</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">fields</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">field_index</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// è¿™é‡Œæ¯æ¬¡éƒ½æ˜¯ä¸åŒçš„å€¼</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">inline</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">...</span><span style="color:#FFAB70;">fields</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">len</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#F97583;">|</span><span style="color:#FFAB70;">idx</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">@typeInfo</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">fields</span><span style="color:#E1E4E8;">[</span><span style="color:#FFAB70;">idx</span><span style="color:#E1E4E8;">].</span><span style="color:#F97583;">type</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> .</span><span style="color:#FFAB70;">Optional</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">error</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">IndexOutOfBounds</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// è¿™æ®µå‡½æ•°ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªç»“æ„ä½“çš„å­—æ®µæ˜¯å¦æ˜¯ optinalï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ comptime çš„</span></span>
<span class="line"><span style="color:#6A737D;">// æ•…æˆ‘ä»¬å¯ä»¥åœ¨ä¸‹é¢ä½¿ç”¨inline æ¥è¦æ±‚ç¼–è¯‘å™¨å¸®æˆ‘ä»¬å±•å¼€è¿™ä¸ªswitch</span></span>
<span class="line"><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isFieldOptional</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">comptime</span><span style="color:#24292E;"> </span><span style="color:#E36209;">T</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">type</span><span style="color:#24292E;">, </span><span style="color:#E36209;">field_index</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">usize</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">!bool</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">fields</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">@typeInfo</span><span style="color:#24292E;">(</span><span style="color:#E36209;">T</span><span style="color:#24292E;">).</span><span style="color:#E36209;">Struct</span><span style="color:#24292E;">.</span><span style="color:#E36209;">fields</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">field_index</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// è¿™é‡Œæ¯æ¬¡éƒ½æ˜¯ä¸åŒçš„å€¼</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">inline</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">...</span><span style="color:#E36209;">fields</span><span style="color:#24292E;">.</span><span style="color:#E36209;">len</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> =&gt; </span><span style="color:#D73A49;">|</span><span style="color:#E36209;">idx</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">@typeInfo</span><span style="color:#24292E;">(</span><span style="color:#E36209;">fields</span><span style="color:#24292E;">[</span><span style="color:#E36209;">idx</span><span style="color:#24292E;">].</span><span style="color:#D73A49;">type</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> .</span><span style="color:#E36209;">Optional</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> =&gt; </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">error</span><span style="color:#24292E;">.</span><span style="color:#E36209;">IndexOutOfBounds</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><code>inline else</code> å¯ä»¥å±•å¼€æ‰€æœ‰çš„ else åˆ†æ”¯ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå…è®¸ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ˜¾ç¤ºç”Ÿæˆæ‰€æœ‰åˆ†æ”¯ï¼Œè¿™æ ·åœ¨ç¼–è¯‘æ—¶å¯ä»¥æ£€æŸ¥åˆ†æ”¯æ˜¯å¦å‡èƒ½è¢«æ­£ç¡®åœ°å¤„ç†ï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">withSwitch</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">any</span><span style="color:#E1E4E8;">: </span><span style="color:#FFAB70;">AnySlice</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">usize</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">any</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">inline</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#F97583;">|</span><span style="color:#FFAB70;">slice</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">slice</span><span style="color:#E1E4E8;">.</span><span style="color:#FFAB70;">len</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">withSwitch</span><span style="color:#24292E;">(</span><span style="color:#E36209;">any</span><span style="color:#24292E;">: </span><span style="color:#E36209;">AnySlice</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">usize</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">any</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">inline</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> =&gt; </span><span style="color:#D73A49;">|</span><span style="color:#E36209;">slice</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#E36209;">slice</span><span style="color:#24292E;">.</span><span style="color:#E36209;">len</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>å½“ä½¿ç”¨ <code>inline else</code> æ•è· tag union æ—¶ï¼Œå¯ä»¥é¢å¤–æ•è· tag å’Œå¯¹åº”çš„ valueï¼š</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">U</span><span style="color:#E1E4E8;"> = </span><span style="color:#F97583;">union</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">enum</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">u32</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">b</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">f32</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getNum</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">u</span><span style="color:#E1E4E8;">: </span><span style="color:#FFAB70;">U</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">u32</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">u</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// è¿™é‡Œ num æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶å¯çŸ¥çš„å€¼</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// è€Œ tag åˆ™æ˜¯å¯¹åº”çš„æ ‡ç­¾åï¼Œè¿™æ˜¯ç¼–è¯‘æœŸå¯çŸ¥çš„</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">inline</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> =&gt; </span><span style="color:#F97583;">|</span><span style="color:#FFAB70;">num</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">tag</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">tag</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> .</span><span style="color:#FFAB70;">b</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">@intFromFloat</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">num</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">num</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#E36209;">U</span><span style="color:#24292E;"> = </span><span style="color:#D73A49;">union</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">enum</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">a</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">u32</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">b</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">f32</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getNum</span><span style="color:#24292E;">(</span><span style="color:#E36209;">u</span><span style="color:#24292E;">: </span><span style="color:#E36209;">U</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">u32</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">u</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// è¿™é‡Œ num æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶å¯çŸ¥çš„å€¼</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// è€Œ tag åˆ™æ˜¯å¯¹åº”çš„æ ‡ç­¾åï¼Œè¿™æ˜¯ç¼–è¯‘æœŸå¯çŸ¥çš„</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">inline</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> =&gt; </span><span style="color:#D73A49;">|</span><span style="color:#E36209;">num</span><span style="color:#24292E;">, </span><span style="color:#E36209;">tag</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">tag</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> .</span><span style="color:#E36209;">b</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">@intFromFloat</span><span style="color:#24292E;">(</span><span style="color:#E36209;">num</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#E36209;">num</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div>`,23),e=[o];function c(t,E,r,y,i,F){return n(),a("div",null,e)}const u=s(p,[["render",c]]);export{d as __pageData,u as default};
